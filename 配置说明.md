# 配置指南 / Configuration Guide

本文档说明了项目中需要配置的参数。所有配置项已被替换为占位符，请在部署前根据实际环境进行配置。

This document describes the configuration parameters that need to be set in the project. All configuration items have been replaced with placeholders. Please configure according to your actual environment before deployment.

---

## 1. 数据库配置 / Database Configuration

**文件位置 / File Location:** `source/backend_service/sample/src/main/resources/application.yml`

```yaml
spring:
  datasource:
    druid:
      url: jdbc:mysql://[YOUR_MYSQL_HOST]:3306/cloud_sample
      username: [YOUR_MYSQL_USERNAME]
      password: [YOUR_MYSQL_PASSWORD]
```

**需要配置 / Required:**
- `[YOUR_MYSQL_HOST]`: MySQL服务器地址
- `[YOUR_MYSQL_USERNAME]`: MySQL用户名
- `[YOUR_MYSQL_PASSWORD]`: MySQL密码

---

## 2. Redis配置 / Redis Configuration

**文件位置 / File Location:** `source/backend_service/sample/src/main/resources/application.yml`

```yaml
redis:
  host: [YOUR_REDIS_HOST]
  password: [YOUR_REDIS_PASSWORD]
```

**需要配置 / Required:**
- `[YOUR_REDIS_HOST]`: Redis服务器地址
- `[YOUR_REDIS_PASSWORD]`: Redis密码

---

## 3. MQTT配置 / MQTT Configuration

**文件位置 / File Location:** `source/backend_service/sample/src/main/resources/application.yml`

```yaml
mqtt:
  BASIC:
    host: [YOUR_MQTT_HOST]
    username: [YOUR_MQTT_USERNAME]
    password: [YOUR_MQTT_PASSWORD]
    client-id: [YOUR_CLIENT_ID]
  DRC:
    host: [YOUR_MQTT_HOST]
    username: [YOUR_MQTT_USERNAME]
    password: [YOUR_MQTT_PASSWORD]
```

**需要配置 / Required:**
- `[YOUR_MQTT_HOST]`: MQTT服务器地址
- `[YOUR_MQTT_USERNAME]`: MQTT用户名
- `[YOUR_MQTT_PASSWORD]`: MQTT密码
- `[YOUR_CLIENT_ID]`: MQTT客户端ID

---

## 4. 对象存储配置 / Object Storage Configuration (MinIO/OSS)

**文件位置 / File Location:** `source/backend_service/sample/src/main/resources/application.yml`

```yaml
oss:
  endpoint: [YOUR_MINIO_ENDPOINT]
  access-key: [YOUR_MINIO_ACCESS_KEY]
  secret-key: [YOUR_MINIO_SECRET_KEY]
```

**需要配置 / Required:**
- `[YOUR_MINIO_ENDPOINT]`: MinIO/OSS服务端点
- `[YOUR_MINIO_ACCESS_KEY]`: 访问密钥ID
- `[YOUR_MINIO_SECRET_KEY]`: 访问密钥

---

## 5. DJI Cloud API配置 / DJI Cloud API Configuration

**文件位置 / File Location:** `source/backend_service/sample/src/main/resources/application.yml`

```yaml
cloud-api:
  app:
    id: [YOUR_DJI_APP_ID]
    key: [YOUR_DJI_APP_KEY]
    license: [YOUR_DJI_APP_LICENSE]
```

**需要配置 / Required:**
- `[YOUR_DJI_APP_ID]`: DJI应用ID
- `[YOUR_DJI_APP_KEY]`: DJI应用密钥
- `[YOUR_DJI_APP_LICENSE]`: DJI应用许可证

**获取方式 / How to obtain:** https://developer.dji.com/user/apps/#all

---

## 6. JWT配置 / JWT Configuration

**文件位置 / File Location:** `source/backend_service/sample/src/main/resources/application.yml`

```yaml
jwt:
  secret: [YOUR_JWT_SECRET]
```

**需要配置 / Required:**
- `[YOUR_JWT_SECRET]`: JWT签名密钥

---

## 7. 直播流配置 / Livestream Configuration (Optional)

**文件位置 / File Location:** `source/backend_service/sample/src/main/resources/application.yml`

### GB28181配置
```yaml
livestream:
  url:
    gb28181:
      serverIP: [YOUR_GB28181_SERVER_IP]
      serverID: [YOUR_GB28181_SERVER_ID]
      agentID: [YOUR_GB28181_AGENT_ID]
      agentPassword: [YOUR_GB28181_PASSWORD]
      channel: [YOUR_GB28181_CHANNEL]
```

### RTMP配置
```yaml
rtmp:
  url: rtmp://[YOUR_RTMP_SERVER]:1935/rtp/
```

### RTSP配置
```yaml
rtsp:
  username: [YOUR_RTSP_USERNAME]
  password: [YOUR_RTSP_PASSWORD]
```

### WHIP配置
```yaml
whip:
  url: http://[YOUR_WHIP_SERVER]:8088/rtc/v1/whip/?app=live&stream=
```

---

## 8. 数据库初始化配置 / Database Initialization

### 8.1 MySQL权限配置
**文件位置 / File Location:** `source/mysql/privileges.sql`

```sql
create user 'app_rw'@'%' identified by '[YOUR_DATABASE_PASSWORD]';
```

### 8.2 默认用户配置
**文件位置 / File Location:** `source/mysql/init.sql`

```sql
INSERT INTO `manage_user` VALUES
  (1,'...','[ADMIN_USERNAME]','[ADMIN_PASSWORD]',...,'[MQTT_ADMIN_USERNAME]','[MQTT_ADMIN_PASSWORD]',...),
  (2,'...','[PILOT_USERNAME]','[PILOT_PASSWORD]',...,'[MQTT_PILOT_USERNAME]','[MQTT_PILOT_PASSWORD]',...);
```

### 8.3 工作空间绑定码
**文件位置 / File Location:** `source/mysql/init.sql`

```sql
INSERT INTO `manage_workspace` VALUES
  (1,'...','Test Group One',...,'[YOUR_BIND_CODE]');
```

---

## 安全建议 / Security Recommendations

1. **不要将配置信息提交到版本控制系统** / Never commit configuration to version control
2. **使用环境变量或配置管理工具** / Use environment variables or configuration management tools
3. **定期更换密码和密钥** / Regularly rotate passwords and keys
4. **使用强密码** / Use strong passwords
5. **限制数据库和服务的访问权限** / Restrict access to databases and services
6. **在生产环境中启用SSL/TLS** / Enable SSL/TLS in production environments

---

## 配置步骤 / Configuration Steps

1. 复制配置模板文件（`.example` 文件）
2. 编辑配置文件，替换所有 `[YOUR_*]` 占位符
3. 验证所有配置项已正确填写
4. 测试服务连接
5. 启动应用

详细部署说明请参考 `README.md`。

For detailed deployment instructions, please refer to `README.md`.
